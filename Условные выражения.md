Условные выражения позволяют использовать [`if`](https://docs.python.org/3/reference/compound_stmts.html#if "(в Python v3.12)") … [`elif`](https://docs.python.org/3/reference/compound_stmts.html#elif "(в Python v3.12)") … [`else`](https://docs.python.org/3/reference/compound_stmts.html#else "(в Python v3.12)") логику в фильтрах, аннотациях, агрегациях и обновлениях. Условное выражение оценивает ряд условий для каждой строки таблицы и возвращает соответствующее выражение результата.

### `When`[¶](https://django.fun/docs/django/5.0/ref/models/conditional-expressions/#when "Permalink to this heading")

_class_ `When`(_condition=None_, _then=None_, _**lookups_)[[исходный код]](https://django.fun/docs/django/5.0/_modules/django/db/models/expressions/#When)[¶](https://django.fun/docs/django/5.0/ref/models/conditional-expressions/#django.db.models.expressions.When "Ссылка на это определение")

Объект `When()` используется для инкапсуляции условия и его результата для использования в условном выражении. Использование объекта `When()` аналогично использованию метода [`filter()`](https://django.fun/docs/django/5.0/ref/models/querysets/#django.db.models.query.QuerySet.filter "django.db.models.query.QuerySet.filter"). Условие может быть задано с помощью объектов [field lookups](https://django.fun/docs/django/5.0/ref/models/querysets/#field-lookups), [`Q`](https://django.fun/docs/django/5.0/ref/models/querysets/#django.db.models.Q "django.db.models.Q") или [`Expression`](https://django.fun/docs/django/5.0/ref/models/expressions/#django.db.models.Expression "django.db.models.Expression"), у которых `output_field` является [`BooleanField`](https://django.fun/docs/django/5.0/ref/models/fields/#django.db.models.BooleanField "django.db.models.BooleanField"). Результат выдается с помощью ключевого слова `then`.

Некоторые примеры:

>>> from django.db.models import F, Q, When
>>> # String arguments refer to fields; the following two examples are equivalent:
>>> When(account_type=Client.GOLD, then="name")
>>> When(account_type=Client.GOLD, then=F("name"))
>>> # You can use field lookups in the condition
>>> from datetime import date
>>> When(
...     registered_on__gt=date(2014, 1, 1),
...     registered_on__lt=date(2015, 1, 1),
...     then="account_type",
... )

