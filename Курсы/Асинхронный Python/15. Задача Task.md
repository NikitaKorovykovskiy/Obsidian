**Задача/`Task`** — это объект, который планирует, управляет и независимо от других задач запускает корутину в цикле событий**.** Задача оборачивает корутину, планирует ее выполнение и предоставляет способы взаимодействия с ней. Мы коротко уже говорили о них [здесь](https://stepik.org/lesson/933700/step/1?unit=939599), а в этом разделе мы поговорим о них подробнее, разберём методы управления задачами.

Задачи используются для одновременного планирования и запуска любого количества корутин. Когда корутина "обёрнута" в задачу функцией `asyncio.**create_task(coro)**`, корутина (coro) автоматически запускается в ближайшее время.

### Cостояния задачи:

Напомним, у задачи есть три состояния, о которых мы говорили [в прошлых уроках](https://stepik.org/lesson/933701/step/2?unit=939600): 

- `pending`
- `finished` 
- `cancelled`

А также методы проверки состояния: 

- `done()` - возвращает `True`, если задача завершена, то есть находится в состоянии `finished` или `cancelled`.
- `cancelled()` - возвращает `True`, если задача отменена, то есть находится в состоянии `cancelled`.

### Жизненный цикл задачи:

Жизненный цикл асинхронной задачи — это последовательность состояний и этапов, через которые проходит задача от момента ее создания до завершения.

**Рассмотрим каждый этап подробнее:**

1. **Создание**: Это начальная точка, где задача создается методом `create_task()`.
2. **Планирование (`done() == False`)**: Задача запланирована для выполнения, но еще не начала выполняться. Свойство `done()` возвращает `False`, указывая на то, что задача еще не завершена.
3. **Запуск (`done() == False`)**: Задача начинает выполняться. Состояние выполнения проверяется методом `done()`, который по-прежнему возвращает `False`.
4. **Приостановка (`done() == False`)**: Задача может быть приостановлена, например, если она ожидает завершения IO операции.
5. **Результат (`result(), done() == True`)**: По завершении задача возвращает результат через метод `result()`.
6. **Исключения (`exception(), done() == True`)**: Если во время выполнения задачи возникает исключение, оно может быть получено с помощью метода `exception()`.
7. **Отмена (`cancelled() == True, done() == True`)**: Если задача была отменена, метод `cancelled()` возвращает `True`. При этом метод `done()` также возвращает `True`.
8. **Выполнено (`done() == True`)**: Когда задача успешно завершена, метод `done()` возвращает `True`.

_Диаграмма ниже суммирует этот жизненный цикл, показывая переходы между каждой фазой, а также состояния задач на каждой из фаз._ 

![](https://ucarecdn.com/33c16196-4135-47ba-bebe-70c967238a39/)